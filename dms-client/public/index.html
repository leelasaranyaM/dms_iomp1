<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Disaster Management Dashboard</title>
  </head>
  <body>
    <div id="root"></div>

    <script>
      window.maps_local = {
        show_on_map: function(options) {
          console.log("--- External Map Service Called ---");
          
          const source = encodeURIComponent(options.places[0] || '');
          const destination = encodeURIComponent(options.places[1] || '');
          const waypoints = encodeURIComponent(options.places.slice(2).join(' | ')); 
          
          // Use the stable Google Maps API base URL
          let mapUrl = 'https://www.google.com/maps/dir/?api=1';

          if (source) mapUrl += '&origin=' + source;
          if (destination) mapUrl += '&destination=' + destination;
          if (waypoints) mapUrl += '&waypoints=' + waypoints;
          mapUrl += '&travelmode=driving';

          window.open(mapUrl, '_blank');
        }
      };
    </script>
    </body>
</html>